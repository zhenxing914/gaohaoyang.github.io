---
layout: post
title:  "es通过beats进行可视化运维"
categories: "Elasticsearch"
tags: "elasticsearch"
author: "songzhx"
date:   2019-06-06 17:03:00
---



  # 天翼云Ealsticsearch通过Beats搭建可视化运维系统



## 1. 配置天翼云Elasticsearch

1.登录天翼云Elasticsearch控制台，进入基本信息，找到公网地址。

![1566798574721](C:\Users\song\AppData\Roaming\Typora\typora-user-images\1566798574721.png)





## 2.下载安装包

```bash
##RPM包
curl -L -O https://artifacts.elastic.co/downloads/beats/auditbeat/auditbeat-7.3.0-x86_64.rpm

##DEB包
curl -L -O https://artifacts.elastic.co/downloads/beats/auditbeat/auditbeat-7.3.0-amd64.deb

##macOS
curl -L -O https://artifacts.elastic.co/downloads/beats/auditbeat/auditbeat-7.3.0-darwin-x86_64.tar.gz

##windows
下载链接 https://www.elastic.co/cn/downloads/beats/auditbeat
```





## 3. 配置AuditBeat

1.安装auditbeat

```bash
##RPM
sudo rpm -vi auditbeat-7.3.0-x86_64.rpm

##DEB
sudo dpkg -i auditbeat-7.3.0-amd64.deb

##macOS
tar xzvf auditbeat-7.3.0-darwin-x86_64.tar.gz
cd auditbeat-7.3.0-darwin-x86_64/

##windows
1.解压文件到C:\Program Files
2.文件夹auditbeat-7.3.0-windows重命名为Auditbeat
3. cd "C:\Program Files\Auditbeat"   .\install-service-auditbeat.ps1

```



2.修改配置文件

```yaml
output.elasticsearch:
  hosts: ["<es_url>"]
  username: "elastic"
  password: "<password>"
setup.kibana:
  host: "<kibana_url>"
```

- hosts: 指定elasticsearch集群的地址和端口，例：192.168.1.10:9200
- username：指定elasticsearch集群用户名 例：es
- password：指定elasticsearch集群登录密码 例：password
- host：指定kibana地址，例：192.168.1.10:5601

其中elasticsearch集群地址和kibana地址均是第一步中提供的公网地址。



3.启动AuditBeats

```bash
sudo auditbeat setup
sudo service auditbeat start
```



## 4. 在Kibana中查看收集到的数据

**4.1 用户主机相关信息：**

![1566528266777](C:\Users\song\AppData\Roaming\Typora\typora-user-images\1566528266777.png)



**4.2 进程相关的监控**

![1566528394532](C:\Users\song\AppData\Roaming\Typora\typora-user-images\1566528394532.png)