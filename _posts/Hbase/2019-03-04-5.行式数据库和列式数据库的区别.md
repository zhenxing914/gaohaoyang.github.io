---
layout: post
title:  "行列数据的区别"
categories: "Hbase"
tags: "Hbase"
author: "songzhx"
date:   2019-03-04 13:37:00
---

## 1. 概念

数据库以行、列的二维表的形式存储数据。可是却以一维字符串的方式存储。比例如以下面的一个表：

| EmpId | Lastname | Firstname | Salary |
| ----- | -------- | --------- | ------ |
| 1     | Smith    | Joe       | 40000  |
| 2     | Jones    | Mary      | 50000  |
| 3     | Johnson  | Cathy     | 44000  |

这个简单的表包含员工代码(EmpId), 姓名字段(Lastname and Firstname)及工资(Salary).

这个表存储在电脑的内存(RAM)和存储(硬盘)中。尽管内存和硬盘在机制上不同，电脑的操作系统是以相同的方式存储的。数据库必须把这个二维表存储在一系列一维的“字节”中，由操作系统写到内存或硬盘中。

行式数据库把一行中的数据值串在一起存储起来，然后再存储下一行的数据。以此类推。

```
1,Smith,Joe,40000;
2,Jones,Mary,50000;
3,Johnson,Cathy,44000;
```



列式数据库把一列中的数据值串在一起存储起来，然后再存储下一列的数据，以此类推。

```
1,2,3;
Smith,Jones,Johnson;
Joe,Mary,Cathy;
40000,50000,44000;
```

这仅仅是一个简化的说法。

在关系数据库领域，除传统的ORACLE、SQLSERVER、MYSQL等行式数据库外。眼下在数据仓库领域列式数据库越来越受到关注。



## 2. 对比 

1. 行式更适合OLTP, 查询一个记录的全部列。

 列式更适合OLAP，

很适合于在数据仓库领域发挥作用，比方数据分析、海量存储和商业智能。

涉及不常常更新的数据。

因为设计上的不同。列式数据库在并行查询处理和压缩上更有优势。并且数据是以列为单元存储，全然不用考虑数据建模或者说建模更简单了。要查询计算哪些列上的数据，直接读取列即可。



2 . 列式在存储方面占有非常大的优势，**能有效提高数据压缩比**，节省存储空间。



## 3. OLAP VS OLTP

数据处理大致可以分成两大类：联机事务处理OLTP（on-line transaction processing）、联机分析处理OLAP（On-Line Analytical Processing）。OLTP是传统的关系型数据库的主要应用，主要是基本的、日常的事务处理，例如银行交易。OLAP是数据仓库系统的主要应用，支持复杂的分析操作，侧重决策支持，并且提供直观易懂的查询结果。

OLTP主要用来记录某类业务事件的发生，如购买行为，当行为产生后，系统会记录是谁在何时何地做了何事，这样的一行（或多行）数据会以增删改的方式在数据库中进行数据的更新处理操作，要求实时性高、稳定性强、确保数据及时更新成功，像公司常见的业务系统如ERP，CRM，OA等系统都属于OLTP。

当数据积累到一定的程度，我们需要对过去发生的事情做一个总结分析时，就需要把过去一段时间内产生的数据拿出来进行统计分析，从中获取我们想要的信息，为公司做决策提供支持，这时候就是在做OLAP了。

因为OLTP所产生的业务数据分散在不同的业务系统中，而OLAP往往需要将不同的业务数据集中到一起进行统一综合的分析，这时候就需要根据业务分析需求做对应的数据清洗后存储在数据仓库中，然后由数据仓库来统一提供OLAP分析。所以我们常说OLTP是数据库的应用，OLAP是数据仓库的应用，下面用一张图来简要对比。



## 3. 参考

1.  [什么是行数据库、什么是列数据库](https://www.cnblogs.com/yutingliuyl/p/6917772.html)
2.  https://www.zhihu.com/question/24110442/answer/851671343
3. [ods、dw、dm关系](https://www.jianshu.com/p/72e395d8cb33)