---
layout: post
title:  "java内存区域与内存溢出-1.java内存区域"
categories: "jvm"
tags: "jvm"
author: "songzhx"
date:   2018/06/25 17:45:21 
---

java运行时数据区介绍

![img](https://tva1.sinaimg.cn/large/006y8mN6gy1g6fcqyjucvj319s0l6q5t.jpg)



## 程序计数器

​	每条线程都需要有一个独立的程序计数器，各条线程之间计数器互不影响，独立存储。



## 虚拟机栈

​	java虚拟机栈也是线程私有的，他的生命周期与线程相同。

​	虚拟机栈描述的是java方法执行的内存模型：每个方法在执行的同时都会创建一个栈帧用于存储局部变量表/操作数栈/动态链接/方法出口等信息。每一个方法从调用知道执行完成的过程，就对应着一个栈帧在虚拟机栈中入栈到出栈的过程。



## 本地方法栈

​	本地方法栈与虚拟机栈所发挥的作用是非常相似的，他们之间的区别不过是虚拟机栈为虚拟机执行java方法，而本地方法栈则为虚拟机使用到的Native方法服务。



## Java堆

​	java堆是被所有线程共享的一块内存区域，在虚拟机启动时创建。此内存区唯一的目的就是存放对象实例。



## 方法区

​	方法区与java堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机**加载的类信息/常量/静态常量/即时编译器编译后的代码**等数据。



## 运行时常量池

​	运行时常量池是方法区的一部分，Class文件中除了有类的版本/字段/方法/接口等描述信息外，还有一项信息是常量池，用于存放编译期生成的各种字面量和符号引用，这部分内容将在类加载后进入方法区的运行时常量池中存放。

```java
int i = 1; // 把整数1赋值给int型变量i，整数1就是Java字面量，
String s = "abc"; // abc也是字面量。
```



## 直接内存

​	直接内存并不是虚拟机运行时数据区的一部分，也不是java虚拟机规范中定义的内存区域。

NIO类引入一种基于通道与缓冲区的I/O方式，它可以直接使用Native函数库直接分配堆外内存，然后通过一个存储在java堆中的DirectByteBuffer对象作为这块内存的引用进行操作。

​	本机直接内存的分配不会受到java堆大小的限制，但是，既然是内存，肯定会受到本机总内存的限制。