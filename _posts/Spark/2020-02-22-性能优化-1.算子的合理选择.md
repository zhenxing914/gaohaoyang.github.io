
## 1. reduceByKey和groupByKey

<img src="/Users/song/Library/Application Support/typora-user-images/image-20200225192832166.png" alt="image-20200225192832166" style="zoom:50%;" />

## 2. map和mapPartition（transform）

场景：连接数据库写入数据至表中。

1. map ：有多少个元素就会创建多少个connection。
2. mapPartition ：按照分区数创建connection。
   1. 缺点： 一个partion数据量太大，会出现内存不够情况。
   2. 解决方案：增加partition个数。

<img src="/Users/song/Library/Application Support/typora-user-images/image-20200225192653781.png" alt="image-20200225192653781" style="zoom:50%;" />



##  3. coalesce和repartition

1. repartition将partition调大
2. coalesce 将partition调小



##  4. cache和persist

<img src="/Users/song/Library/Application Support/typora-user-images/image-20200225193007030.png" alt="image-20200225193007030" style="zoom: 60%;" />



## 5. foreach和foreachPartition

1. 是action，写数据库更好
2. 和map、mapPartition用法一

<img src="/Users/song/Library/Application Support/typora-user-images/image-20200225192813735.png" alt="image-20200225192813735" style="zoom:50%;" />

## 6. collect
1. 返回的所有数据都会放在一个数组中同时加载在Driver端内存中。
2. 容易导致OOM

<img src="/Users/song/Library/Application Support/typora-user-images/image-20200225192928774.png" alt="image-20200225192928774" style="zoom:50%;" />


